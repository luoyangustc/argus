
# Video

## 视频业务框架

```ASCII
                                                          +-----------------+
                                                          | Segment Handler |
                                                          +-----------------+
                                                            ^
                                                            |
                                                            |
+----------------+     +--------+     +-------------+     +-----------------+     +----------------+     +-----------------+
| Router Request | --> | vframe | --> | Image Eval  | --> |   Append Cut    | --> | Append Segment | --> | Router Response |
+----------------+     +--------+     +-------------+     +-----------------+     +----------------+     +-----------------+
                                        |                   |
                                        |                   |
                                        v                   v
                                      +-------------+     +-----------------+
                                      | Cut Handler |     |    Cut Saver    |
                                      +-------------+     +-----------------+
```

## 视频监控点

### 出入口监控

* 请求并发数. tags: op_count
* OP请求并发数. tags: op
* 消息回调QPS. tags: type, op
* 消息回调响应时间. tags: type, op

### 内部推理监控

* 帧推理QPS. tags: op
* 帧推理响应时间. tags: op
* 原子推理QPS. tags: op, cmd
* 原子推理响应时间. tags: op, cmd

### 视频处理监控

* 首帧等待时间. tags: format
* 视频处理总时长.
* 视频推理总时长.
* 视频下载总时长.
* 等待截帧时间. tags: op, mode
* 截帧等待推理时间. tags: op, mode
